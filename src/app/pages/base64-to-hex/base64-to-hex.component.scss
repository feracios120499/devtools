// Editor container styles for proper height and layout
.editor-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 400px;
}

.editor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 2.5rem;
  margin-bottom: 0.5rem;
}

.editor-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  position: relative;
  min-height: 350px;
}

.editor-input, .editor-output {
  flex: 1;
  height: 100%;
  min-height: 350px;
}

// Monaco container
.monaco-container {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 350px;
  border: 1px solid var(--surface-border);
  border-radius: 4px;
  overflow: hidden;
}

// Editor columns for proper grid layout
.editor-columns {
  flex: 1;
  display: grid;
}

// Information section
.info-section {
  margin-top: 1rem;
}

// Custom styling for PrimeNG select dropdown
:host ::ng-deep {
  // Smaller select dropdown
  .p-select-sm {
    .p-dropdown {
      height: 35px;
      
      .p-dropdown-label {
        padding-top: 0.4rem;
        padding-bottom: 0.4rem;
        font-size: 0.875rem;
      }
      
      .p-dropdown-trigger {
        width: 2rem;
      }
    }
  }
  
  // Make panel width same as trigger
  .same-width-panel {
    min-width: 150px !important;
  }
  
  // Custom float label styling
  .custom-floatlabel {
    margin-top: 0;
    
    .p-float-label {
      font-size: 0.875rem;
    }
    
    input {
      height: 35px;
    }
    
    label {
      margin-top: -0.5rem;
    }
  }
  
  // Override monaco editor styles for better appearance
  .monaco-editor {
    .margin {
      background-color: transparent !important;
    }
  }
}

// Host element takes up full height
:host {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  padding: 1rem;
  background-color: var(--surface-ground);
}

@media (max-width: 1200px) {
  :host {
    padding: 0.75rem;
  }
}

@media (max-width: 992px) {
  :host {
    padding: 0.5rem;
  }
}

// Главный контейнер всего содержимого
.flex-col {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
}

// Главный контейнер редакторов
.editor-columns {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  flex: 1 1 auto;
  min-height: 500px; // Увеличиваем минимальную высоту
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    min-height: auto; // На мобильных устройствах не используем минимальную высоту для контейнера
  }
  
  .col {
    display: flex;
    flex-direction: column;
    height: 100%;
    
    @media (max-width: 768px) {
      min-height: 300px; // Минимальная высота только для колонок на мобильных
      max-height: 350px; // Максимальная высота для мобильных
      margin-bottom: 1rem; // Добавляем отступ между редакторами на мобильных
    }
    
    @media (max-width: 576px) {
      min-height: 250px;
      max-height: 300px;
    }
  }
}

// Контейнер для каждого редактора
.editor-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden; // Предотвращает переполнение
  
  @media (max-width: 768px) {
    height: auto;
    min-height: 300px;
    max-height: 350px;
  }
  
  @media (max-width: 576px) {
    min-height: 250px;
    max-height: 300px;
  }

  // Заголовок редактора
  .editor-header {
    height: 2.5rem;
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.5rem;
  }
  
  // Содержимое редактора
  .editor-content {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0; // Важно для правильного расчета flex
    height: 100%;
    
    @media (max-width: 768px) {
      height: calc(100% - 3rem); // Учитываем высоту заголовка
      max-height: 300px;
    }
    
    @media (max-width: 576px) {
      max-height: 250px;
    }
  }
}

// Стили для Monaco Editor контейнера
.monaco-container {
  flex: 1 1 auto;
  height: 100%;
  min-height: 0; // Критично для правильного расчета высоты flexbox
  overflow: hidden;
  border-radius: 6px;
  border: 1px solid var(--surface-border);
  
  @media (max-width: 768px) {
    height: 100%;
    min-height: 250px;
    max-height: 300px;
  }
  
  @media (max-width: 576px) {
    min-height: 200px;
    max-height: 250px;
  }
}

// Высота редакторов на мобильных устройствах
@media (max-width: 768px) {
  .monaco-container {
    min-height: 250px;
    max-height: 300px;
  }
  
  textarea.editor-input, 
  textarea.editor-output {
    min-height: 250px;
    max-height: 300px;
  }
}

// Для того, чтобы редакторы растягивались по вертикали
.flex-col-container {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
  height: 100%;
  position: relative;
}

// Стили для информационного блока
.info-section {
  margin-top: 1rem;
  padding: 1rem;
  border-radius: 6px;
  background-color: var(--surface-card);
  border: 1px solid var(--surface-border);
  flex: 0 0 auto;
}

// Стили для текстовых областей
textarea.editor-input,
textarea.editor-output {
  flex: 1 1 auto;
  min-height: 0;
  height: 100%;
  resize: none;
  font-family: monospace;
  
  @media (max-width: 768px) {
    min-height: 250px;
    max-height: 300px;
  }
  
  @media (max-width: 576px) {
    min-height: 200px;
    max-height: 250px;
  }
}

// Add some styling for code blocks
code {
  font-family: monospace;
  border-radius: 0.25rem;
  padding: 0.125rem 0.25rem;
}

// Fix for toast z-index to ensure it appears above Monaco editor
:host ::ng-deep {
  .p-toast {
    z-index: 1000;
  }

  // Make sure monaco editor takes full height
  .monaco-editor,
  .monaco-editor .overflow-guard {
    width: 100% !important;
    height: 100% !important;
  }
  
  // Fix dropdown positioning issues
  .p-dropdown-panel {
    z-index: 1001 !important;
  }
  
  // Fill all available space with editor
  .monaco-container, 
  ngx-monaco-editor, 
  .editor-container {
    width: 100% !important;
    height: 100% !important;
    min-height: 300px;
    overflow: hidden;
    
    @media (max-width: 768px) {
      min-height: 250px !important;
      max-height: 300px !important;
    }
    
    @media (max-width: 576px) {
      min-height: 200px !important;
      max-height: 250px !important;
    }
  }
  
  // Styling for dropdown
  .p-select-sm {
    .p-dropdown {
      height: 35px;
      
      .p-dropdown-label {
        padding-top: 0.4rem;
        padding-bottom: 0.4rem;
        font-size: 0.875rem;
      }
      
      .p-dropdown-trigger {
        width: 2rem;
      }
    }
  }
  
  // Make panel width same as trigger
  .same-width-panel {
    min-width: 150px !important;
  }
}

// Custom scrollbar styling for better aesthetics
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-thumb {
  background: rgba(128, 128, 128, 0.5);
  border-radius: 5px;
}

// Responsive adjustments
@media screen and (max-width: 768px) {
  .editor-container {
    min-height: 300px;
  }
  
  .monaco-container, .editor-input, .editor-output {
    min-height: 250px;
  }
  
  :host ::ng-deep {
    .p-select-sm {
      .p-dropdown {
        width: 100%;
      }
    }
  }
} 